<div class="contentChat" (click)="marcarChatAgentecomoleido()">
  <div class="headerChatAula" *ngIf="nombreasesorglobal!=''">
    <div class="imgAsesor">
      <img [src]="'https://bsginstitute.com/img-web/chatV2/'+nombreAsesorSplit[0]+'-'+nombreAsesorSplit[1]+'.png'" alt="">
      <div class="nombreAsesor">Soporte Técnico</div>
    </div>
    <div class="textoAsesor">Soy {{nombreAsesorSplit[0]}} , {{mensajeStateAsesor}}</div>
  </div>
  <ng-container *ngIf="stateAsesor">
    <div #contenidoMsj class="contentChatMsj">
      <div class="mensajeDefecto">Chat iniciado</div>
      <div class="mensajeDefecto">{{nombreAsesorSplit[0]}} {{nombreAsesorSplit[1]}} se unió al Chat</div>

      <ng-container *ngFor="let item of mensajesAnteriore;let i = index">
          <div  [ngClass]="{'visitanteMsj': item.IdRemitente=='visitante','asesorMsj':item.IdRemitente=='asesor'}">
            <div class="cntnmsj">
              <div class="remitente">{{item.NombreRemitente.split(' ')[0]}}</div>
              <div class="msj" [innerHtml]="item.Mensaje | safeHtml"></div>
              <ng-container *ngIf="item.IdRemitente=='visitante'">
                <ng-container  *ngIf="(mensajesAnteriore.length-i)>=NroMensajesSinLeer">
                  <div class="statemsjleido">
                    <i class="material-icons" style="right: 4px;
                    z-index: 3;">check</i>
                    <i class="material-icons" style="right: 1px;
                    z-index: 4;">check</i>
                  </div>
                </ng-container>
                <ng-container *ngIf="(mensajesAnteriore.length-i)<NroMensajesSinLeer">
                  <div class="statemsjnoleido">
                    <i class="material-icons" style="right: 4px;
                    z-index: 3;">check</i>
                    <i class="material-icons" style="right: 1px;
                    z-index: 4;">check</i>
                  </div>
                </ng-container>
              </ng-container>

            </div>
          </div>
      </ng-container>

    </div>
    <div class="footerChatAula">
      <input class="chat-box-textinput" [ngClass]="{'inputActive':inputActive}" (keyup.enter)="enviarmsj()" (focus)="inputActive=true"
        (focusout)="inputActive=false" placeholder="Escribe tu mensaje aquí " [(ngModel)]="chatBox">
        <i class="material-icons" (click)="enviarmsj()">send</i>
        <i class="material-icons addfile" (click)="fileInput.click()">attach_file</i>
      <input  #fileInput type="file" style="display:none;">
    </div>
  </ng-container>
  <ng-container *ngIf="!stateAsesor">
    <textarea placeholder="Tu Mensaje" [(ngModel)]="chatBox" cols="30" rows="4" style="    width: 90%;
    margin: 5%;padding: 10px;" (keyup.enter)="enviarmsj()"></textarea>
    <div style="    width: 100%;
    display: flex;
    justify-content: center;
    margin-bottom: 10%;">
      <app-default-button  (click)="enviarmsj()" [confs]="{color:'primary',titulo:'Enviar'}" [style]="'padding:0px 30px;margin:0px '"
      ></app-default-button>
    </div>
  </ng-container>
</div>
