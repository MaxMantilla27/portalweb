<!-- holax1 -->
<div class="contentChat" >
  <div class="headerChatAula" >
    <div class="imgAsesor">
      <img [src]="img" (error)="ErrorImgAsesor()" alt="">
      <div class="nombreAsesor">
        <div *ngIf="nombreasesorglobal!=''" style="margin-left: 15px;">
          <div>
            {{nombreAsesorSplit[0]}} {{nombreAsesorSplit[1]}}
          </div>
          <div style="font-size: 14px;font-weight: 500;">
            BSG Institute
          </div>
        </div>
        <div *ngIf="nombreasesorglobal==''" style="text-align: center;">
          Chatea en línea
        </div>
      </div>
      <div class="stateAsesor" [ngClass]="{'OnConected': stateAsesor==true}">

      </div>
    </div>
  </div>
  <ng-container *ngIf="estadoLogueo=='false';else login">
    <app-form-chat-atc (SaveForm)="actualizarDatosAlumno($event)" [IdPGeneral]="idProgramageneral" [IdPespecificoPrograma]="IdPespecificoPrograma"></app-form-chat-atc>
  </ng-container>

  <ng-template #login>
    <ng-container>
      <div #contenidoMsj class="contentChatMsj" (click)="marcarChatAgentecomoleido()">
        <div class="mensajeDefecto">Chat iniciado</div>
        <div class="mensajeDefecto">{{nombreAsesorSplit[0]}} {{nombreAsesorSplit[1]}} se unió al Chat</div>

        <ng-container *ngFor="let item of mensajesAnteriore;let i = index">
            <div  [ngClass]="{'visitanteMsj': item.idRemitente.toLowerCase()=='visitante','asesorMsj':item.idRemitente.toLowerCase()=='asesor'}">
              <div class="cntnmsj">
                <div class="remitente">{{item.nombreRemitente.split(' ')[0]}}</div>
                <div class="msj" [innerHtml]="item.mensaje | safeHtml"></div>
                <ng-container *ngIf="item.idRemitente=='visitante'">
                  <ng-container  *ngIf="(mensajesAnteriore.length-i)>=NroMensajesSinLeer">
                    <div class="statemsjleido">
                      <i class="material-icons" style="right: 4px;
                      z-index: 3;">check</i>
                      <i class="material-icons" style="right: 1px;
                      z-index: 4;">check</i>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="(mensajesAnteriore.length-i)<NroMensajesSinLeer">
                    <div class="statemsjnoleido">
                      <i class="material-icons" style="right: 4px;
                      z-index: 3;">check</i>
                      <i class="material-icons" style="right: 1px;
                      z-index: 4;">check</i>
                    </div>
                  </ng-container>
                </ng-container>

              </div>
            </div>
        </ng-container>

      </div>
      <div class="footerChatAula" (click)="marcarChatAgentecomoleido()">
        <input class="chat-box-textinput" [ngClass]="{'inputActive':inputActive}" (keyup.enter)="enviarmsj()" (focus)="inputActive=true"
          (focusout)="inputActive=false" placeholder="Escribe tu mensaje aquí " [(ngModel)]="chatBox">
          <i class="material-icons" (click)="enviarmsj()">send</i>
          <i class="material-icons addfile" (click)="fileInput.click()">attach_file</i>
        <input  #fileInput type="file" style="display:none;" accept="image/png, image/gif, image/jpeg" (change)="AgregarArchivoChatSoporte($event)">
      </div>
    </ng-container>
  </ng-template>
</div>
